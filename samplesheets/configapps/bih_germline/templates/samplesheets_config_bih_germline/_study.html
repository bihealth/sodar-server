{% load samplesheets_tags %}

<div class="card">
  <div class="card-header">
    <h4>Pedigree-Wise iRODS and IGV Shortcuts</h4>
  </div>
  {% if investigation.irods_status %}
    <div class="card-body omics-card-body-table">
      <div class="table-responsive omics-ss-config-app-table-div">
        <table class="table omics-card-table-bordered omics-ss-data-table omics-ss-data-table-configapp">
          <thead>
            <tr>
              <th>Family</th>
              <th>BAM files</th>
              <th>VCF file</th>
              <th>IGV session file</th>
            </tr>
          </thead>
          <tbody>
            {% get_families study as families %}
            {% for fam_id in families %}
              <tr>
                <td>{{ fam_id }}</td>
                <td>
                  {% get_family_sources study fam_id as fam_sources %}
                  {% for fam_source in fam_sources %}
                    <a class="mr-2" href="{% url 'samplesheets.configapps.bih_germline:file' file_type='bam' genericmaterial=fam_source.omics_uuid %}">{{ fam_source.name }} <i class="fa fa-folder-open"></i></a>
                  {% endfor %}
                </td>
                <td><a href="{% url 'samplesheets.configapps.bih_germline:file' file_type='vcf' genericmaterial=fam_sources.0.omics_uuid %}">Pedigree VCF file <i class="fa fa-folder-open"></i></a></td>
                <td><a href="{% url 'samplesheets.configapps.bih_germline:igv' genericmaterial=fam_sources.0.omics_uuid %}">Pedigree IGV session file <i class="fa fa-file-text"></i></a></td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  {% else %}
    <div class="card-body omics-card-body text-center">
    <p class="font-italic">
      iRODS directories not created, file listing disabled
    </p>
    </div>
  {% endif %}
</div>
