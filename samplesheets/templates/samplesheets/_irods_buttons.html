{% load samplesheets_tags %}

{# Parameters #}
{# investigation: Investigation object #}
{# irods_path: full iRODS path to link to #}
{# list_url: SODAR URL for querying file list #}
{# data_table: Whether the file is included within a data table (boolean) #}
{# show_file_list: Whether to show the file list popup (boolean) #}
{# disable_all: Show but disable buttons if True (boolean) #}

{% is_webdav_enabled as irods_webdav_enabled %}
{% get_webdav_url as irods_webdav_url %}

<span class="text-nowrap">
  {% if show_file_list and irods_backend %}
    <button class="btn btn-secondary omics-list-btn omics-irods-popup-list-btn"
            irods-path="{{ irods_path }}"
            list-url="{{ list_url }}"
            role="submit"
            {# NOTE: Modal not triggered here as data is async, see JQuery #}
            {% if not data_table %}
              data-tooltip="tooltip" data-placement="top"
            {% endif %}
            title="List files"
            {% if not investigation.irods_status or disable_all %} disabled{% endif %}>
      <i class="fa fa-folder-open-o"></i>
    </button>
  {% endif %}
  <button class="btn btn-secondary omics-list-btn omics-irods-popup-cmd-btn"
          irods-path="{{ irods_path }}" role="submit"
          data-toggle="modal" data-target="#omics-modal"
          {% if not data_table %}
            data-tooltip="tooltip" data-placement="top"
          {% endif %}
          title="Get iCommands path to files"
          {% if not investigation.irods_status or disable_all %} disabled{% endif %}>
    <i class="fa fa-terminal"></i>
  </button>
  <a class="btn btn-secondary omics-list-btn omics-irods-dav-btn mr-1
     {% if not irods_webdav_enabled or not investigation.irods_status or disable_all %} disabled{% endif %}"
     href="{{ irods_webdav_url }}{{ irods_path }}" role="button"
     {% if not data_table %}
       data-tooltip="tooltip" data-placement="top"
     {% endif %}
     title="Browse files in WebDAV">
    <i class="fa fa-external-link"></i>
  </a>
</span>
