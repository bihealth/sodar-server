{% load samplesheets_tags %}
{% load rules %}
{% has_perm 'samplesheets.export_sheet' request.user project as can_export_sheet %}

<h4>
  {% if table_type == 'assay' %}Assay{% else %}Study{% endif %} Data
  {% if table_type == 'assay' and investigation.irods_status %}
    <i class="fa fa-spin fa-circle-o-notch text-muted sodar-irods-wait-icon"></i>
  {% endif %}
  <div class="input-group sodar-header-input-group pull-right" table-id="{% get_table_id item %}">
    <div class="input-group-prepend">
      {% if table_type == 'assay' %}
      <button class="btn btn-secondary sodar-ss-assay-hide"
              type="submit" id="sodar-ss-assay-hide-{{ item.sodar_uuid }}"
              data-toggle="tooltip" data-placement="top" title="Show/hide study details"
              assay-hide-mode="1"><i class="fa fa-eye-slash"></i></button>
      {% endif %}
      <button class="btn btn-secondary sodar-ss-data-drag-toggle"
              type="submit" id="sodar-ss-data-drag-toggle-{{ item.sodar_uuid }}"
              data-toggle="tooltip" data-placement="top" title="Enable/disable drag scroll"
              drag-mode="0"><i class="fa fa-mouse-pointer"></i></button>
      {% if can_export_sheet %}
        <a role="button" class="btn btn-secondary sodar-ss-data-excel"
           data-toggle="tooltip" data-placement="top" title="Download TSV file for Excel"
           id="sodar-ss-data-excel-{{ item.sodar_uuid }}"
          {% if table_type == 'assay' %}
            href="{% url 'samplesheets:export_tsv' assay=item.sodar_uuid %}">
          {% else %}
            href="{% url 'samplesheets:export_tsv' study=item.sodar_uuid %}">
          {% endif %}
            <i class="fa fa-file-excel-o"></i>
        </a>
      {% endif %}
    </div>
    <input class="form-control sodar-ss-data-filter"
           type="text" placeholder="Filter" aria-label="Filter {{ table_type }} {{ item.sodar_uuid }}"
           id="sodar-ss-data-filter-{{ item.sodar_uuid }}">
  </div>
</h4>
