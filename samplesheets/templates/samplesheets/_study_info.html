{% load samplesheets_tags %}

{% if irods_backend_enabled %}
  {% load irodsbackend_tags %}
{% endif %}

<div class="card-body omics-card-body">
  <dl class="row omics-dl">
    <dt class="col-md-3">Title</dt>
    <dd class="col-md-9">{{ study.get_display_name }}</dd>
    {% if study.description %}
      <dt class="col-md-3">Description</dt>
      <dd class="col-md-9">{{ study.description }}</dd>
    {% endif %}
    <dt class="col-md-3">Configuration</dt>
    <dd class="col-md-9">{{ study.investigation.get_configuration }}</dd>
    {% for comment_k, comment_v in study.comments.items %}
      {% if comment_v.value %}
        <dt class="col-md-3">{{ comment_k }}</dt>
        <dd class="col-md-9">{{ comment_v.value }}</dd>
      {% endif %}
    {% endfor %}
    <dt class="col-md-3">iRODS Repository</dt>
    <dd class="col-md-9">
      {% if investigation.irods_status %}
        <span class="badge badge-pill badge-success">Available</span>
        {% if irods_backend_enabled %}
          {% get_irods_path study as irods_study_path %}
          {% autoescape off %}
            {% get_stats_html irods_study_path project %}
          {% endautoescape %}
        {% endif %}
      {% else %}
        <span class="badge badge-pill badge-danger">Not Created</span>
      {% endif %}
    </dd>
    {% if study.assays %}
      <dt class="col-md-3">Assays</dt>
      <dd class="col-md-9">
        {% for assay in study.assays.all %}
          <a href="#assay{{ assay.sodar_uuid }}">{{ assay.get_display_name }}</a>
          {% if assay.comments %}
            <a class="omics-ss-assay-info-link" tabindex="0" data-toggle="popover"
               data-trigger="focus" data-placement="top" data-html="true"
               data-content="{% get_assay_info_html assay %}">
              <i class="fa fa-info-circle text-info"></i></a>
          {% endif %}
          <br />
        {% endfor %}
      </dd>
    {% endif %}
  </dl>
</div>
