{% load static i18n %}<!DOCTYPE html>
{% load projectroles_tags %}
{% load rules %}

<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Omics Data Management: {% block title %}Page Title{% endblock title %}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- External Javascript includes -->

    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js"></script>
    <![endif]-->

    <!-- Required by Bootstrap v4 beta -->
    <script src="{% static 'js/jquery-3.2.1.min.js' %}"></script>
    <script src="{% static 'js/popper.min.js' %}"></script>
    <script src="{% static 'js/bootstrap.min.js' %}"></script>

    <!-- JQuery Popup Overlay -->
    <script src="{% static 'js/jquery.popupoverlay.js' %}"></script>

    <!-- Shepherd -->
    <script src="{% static 'js/tether.min.js' %}"></script>
    <script src="{% static 'js/shepherd.min.js' %}"></script>

    {% block css %}

      <!-- CSS includes -->

      <!-- Fix for pull-right/pull-left bug when including improts -->
      <style type="text/css">
        .pull-right {
          float: right;
        }

        .pull-left {
          float: left;
        }
      </style>

      <!-- Local Font Awesome Icons -->
      <link rel="stylesheet" href="{% static 'font-awesome-4.7.0/css/font-awesome.min.css' %}">

      <!-- Bootstrap 4 beta CSS -->
      <link href="{% static 'css/bootstrap.min.css' %}" rel="stylesheet">

      <!-- Shepherd theme -->
      <link rel="stylesheet" href="{% static 'css/shepherd-theme-omics.css' %}" />

      <!-- Project-specific CSS -->
      <link href="{% static 'css/project.css' %}" rel="stylesheet">

    {% endblock css %}

    {% block head_extend %}
      {# Extended head stuff from apps goes here #}
    {% endblock head_extend %}
  </head>

  <body>
    <div class="omics-base-container">
      <div class="omics-top-container">
        <div class="omics-titlebar-container">
          <nav class="navbar navbar-expand-sm navbar-dark bg-dark w-100 omics-base-navbar" id="omics-base-navbar">
            <a class="navbar-brand" id="omics-base-navbar-brand" href="/">Omics Data Management</a>
            <ul class="navbar-nav ml-auto" id="omics-base-navbar-nav">

              {# Search #}
              {% if request.user.is_authenticated %}
                <li class="nav-item omics-base-navbar-search">
                  <form class="form-inline" method="get" action="{% url 'project_search' %}">
                  <div class="input-group omics-input-group">

                      <input class="form-control" type="text"
                             placeholder="Search term" name="s" aria-label="Search term"
                             id="omics-nav-search-input" value="{{ search_input }}">
                       <div class="input-group-append">
                         <button class="btn btn-outline-success" type="submit" id="omics-nav-search-submit">Search</button>
                       </div>

                  </div>
                  </form>
                </li>
              {% endif %}

              {# Site-wide apps #}
              {% get_site_apps as site_apps %}
              {% for plugin in site_apps %}
                {% has_perm plugin.app_permission request.user as can_view_app %}
                {% if not plugin.app_permission or can_view_app %}
                  <li class="nav-item">
                    <a class="nav-link"
                       href="{% url plugin.entry_point_url_id %}"
                       id="omics-base-navbar-app-link-{{ plugin.name }}">
                      <i class="fa fa-fw fa-{{ plugin.icon }}"></i> {{ plugin.title }}</a>
                  </li>
                {% endif %}
              {% endfor %}

              {# Help link #}
              <li class="nav-item">
                <a class="nav-link {% get_help_highlight request.user %}"
                   id="site-help-link"><i class="fa fa-fw fa-info-circle"></i> Help</a>
              </li>

              {# User menu #}
              <li class="nav-item">
                <a class="nav-link omics-nav-link-last dropdown-toggle {% if not request.user.is_authenticated %}disabled{% endif %}"
                   id="omics-base-navbar-user-dropdown{% if not request.user.is_authenticated%}-disabled{% endif %}"
                   data-toggle="dropdown">
                  <i class="fa fa-fw fa-user"></i>
                </a>
                <div class="dropdown-menu dropdown-menu-right">
                  <div class="dropdown-header">{{ request.user.name }}<br />{{ request.user.username }}</div>
                  <div class="dropdown-divider"></div>
                  <a class="dropdown-item" href="{{ request.user.get_absolute_url }}" id="omics-base-navbar-link-user-details">
                    <i class="fa fa-fw fa-user-circle-o"></i> User Profile
                  </a>
                  <a class="dropdown-item text-danger" href="{% url 'account_logout' %}" id="omics-base-navbar-link-logout">
                    <i class="fa fa-fw fa-sign-out"></i> Sign Out
                  </a>
                </div>
              </li>

            </ul>
          </nav>
        </div>

        <div class="omics-sub-navbar-container">
          {% block sub_navbar %}
            {# Implement a sub-navbar here #}
        {% endblock sub_navbar %}
        </div>
      </div> <!-- /omics-top-container -->

      <div class="omics-content-container">
        {% block content %}
          <p>Use this document as a way to quick start any new project.</p>
        {% endblock content %}
      </div>

    <!-- Project specific Javascript -->
    {% block javascript %}
      <script src="{% static 'js/project.js' %}"></script>

      <script type="text/javascript">
        tour.addStep('tour_intro', {
            title: 'Welcome to the Tour Help!',
            text: 'The tour help describes key elements on the currently opened ' +
                  'page and aids you in using available features. Advance on ' +
                  'the tour by clicking "Next".',
            attachTo: '.omics-titlebar-container bottom',
            advanceOn: '.docs-link click',
            showCancelLink: true
        });
      </script>
    {% endblock javascript %}

    {# Set up Tour link #}

    <script type="text/javascript">
        if (tourEnabled == false) {
            $('#site-help-link').addClass(
                'disabled').removeClass('text-warning');
        }

        $('#site-help-link').click(function() {
            tour.start();
        });
    </script>

    {% block modal %}{% endblock modal %}

    </div> <!-- /omics-base-container -->

  </body>
</html>
